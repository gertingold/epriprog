
<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>9. Objektorientiertes Programmieren &#8212; Einführung in Prinzipien der Programmierung</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/translations.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="genindex.html" />
    <link rel="search" title="Suche" href="search.html" />
    <link rel="next" title="10. Anhang: Zahlensysteme" href="zahlensysteme.html" />
    <link rel="prev" title="8. Numerische Programmbibliotheken am Beispiel von NumPy/SciPy" href="scipy.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="de">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Einführung in Prinzipien der Programmierung</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="einleitung.html">
   1. Einleitung
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="vorschau.html">
   2. Eine Vorschau
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="datentypen.html">
   3. Einfache Datentypen, Variablen und Zuweisungen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="kontrollstrukturen.html">
   4. Kontrollstrukturen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="funktionen.html">
   5. Funktionen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sequenzen.html">
   6. Zusammengesetzte Datentypen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="einausgabe.html">
   7. Ein- und Ausgabe
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="scipy.html">
   8. Numerische Programmbibliotheken am Beispiel von NumPy/SciPy
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   9. Objektorientiertes Programmieren
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="zahlensysteme.html">
   10. Anhang: Zahlensysteme
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="floats.html">
   11. Anhang: 64-Bit-Gleitkommazahlen nach IEEE-Standard 754
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="unicode.html">
   12. Anhang: Unicode
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://mybinder.org/v2/gh/gertingold/epriprog/master?urlpath=tree/epriprog/objektorientiert.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="headerbtn__icon-container">
  
    <img src="_static/images/logo_binder.svg">
  </span>
<span class="headerbtn__text-container">Binder</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/objektorientiert.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download notebook file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        <a href="_sources/objektorientiert.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#klassen-attribute-und-methoden">
   9.1. Klassen, Attribute und Methoden
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vererbung">
   9.2. Vererbung
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Objektorientiertes Programmieren</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#klassen-attribute-und-methoden">
   9.1. Klassen, Attribute und Methoden
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vererbung">
   9.2. Vererbung
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="objektorientiertes-programmieren">
<span id="oop"></span><h1><span class="section-number">9. </span>Objektorientiertes Programmieren<a class="headerlink" href="#objektorientiertes-programmieren" title="Link zu dieser Überschrift">#</a></h1>
<p>Beim objektorientierten Programmieren handelt es sich um ein Paradigma, das man nutzen
kann, aber nicht muss. So war objektorientiertes Programmieren in älteren Versionen
von FORTRAN überhaupt nicht möglich und andererseits gibt es Programmiersprachen wie
zum Beispiel Java, in denen man nur objektorientiert programmieren kann. Python ermöglicht
zwar objektorientiertes Programmieren, erzwingt es aber nicht. Daher sollte man zumindest
eine Vorstellung davon haben, was die Grundideen des objektorientierten Programmierens
sind, um bei konkreten Problemstellungen erkennen zu können, ob und in welchem Maße es
sich lohnt, diesem Programmierparadigma zu folgen.</p>
<section id="klassen-attribute-und-methoden">
<h2><span class="section-number">9.1. </span>Klassen, Attribute und Methoden<a class="headerlink" href="#klassen-attribute-und-methoden" title="Link zu dieser Überschrift">#</a></h2>
<p>Tatsächlich ist Python objektorientiert konzipiert, so dass wir in den bisherigen Kapiteln
bereits Spuren von objektorientiertem Programmieren gesehen haben, ohne dass dies groß
thematisiert wurde. Für einen allerersten Einblick wollen wir das nun an ein paar Beispielen
nachholen. Als Einstieg dienen uns dabei der Datentyp der komplexen Zahlen. Aus Pythonsicht
gibt es die Klassendefinition der Klasse <code class="docutils literal notranslate"><span class="pre">complex</span></code>, die gewissermaßen den allgemeinen
Bauplan für komplexe Zahlen enthält. Eine konkrete komplexe Zahl ist dann eine Instanz dieser
Klasse.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="mi">2</span><span class="o">+</span><span class="mi">1</span><span class="n">j</span>
<span class="n">x</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;complex&#39;
</pre></div>
</div>
</div>
</div>
<p>Objekte können Attribute haben, also Eigenschaften besitzen. Bei komplexen Zahlen sind dies
Real- und Imaginärteil, die, wie wir aus <a class="reference internal" href="datentypen.html#complex"><span class="std std-numref">Kapitel 3.4</span></a> wissen, auf die folgende Weise
erhalten können.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">real</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">imag</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2.0, 1.0)
</pre></div>
</div>
</div>
</div>
<p>Nach dem Namen der Instanz folgt also der durch einen Punkt abgetrennte Attributname.</p>
<p>Darüber hinaus kann es Methoden geben, also im Grunde genommen Funktionen, die mit den entsprechenden
Objekten verknüpft sind. So erfolgt die Umwandlung einer komplexen Zahl mit Hilfe der Methode
<code class="xref py py-func docutils literal notranslate"><span class="pre">conjugate()</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="o">.</span><span class="n">conjugate</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2-1j)
</pre></div>
</div>
</div>
</div>
<p>Auch hier folgt dem Namen der Instanz der durch einen Punkt abgetrennte Methodenname. Natürlich
können Methoden auch Argumente besitzen. Als Beispiel nennen wir die <code class="xref py py-func docutils literal notranslate"><span class="pre">index()</span></code>-Methode von
Listen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">mylist</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">21</span><span class="p">]</span>
<span class="n">mylist</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2
</pre></div>
</div>
</div>
</div>
<p>Das Beispiel der komplexen Zahlen verdeutlicht einen der wesentlichen Vorteile des objektorientierten
Programmierens. Die komplexe Zahl, in unserem Beispiel <code class="docutils literal notranslate"><span class="pre">x</span></code>, wird als ein Objekt verstanden und nicht
separat als Real- und Imaginärteil der betreffenden Zahl. Dies ermöglicht es uns, zum Beispiel die
komplexe Konjugation direkt auf die komplexe Zahl operieren zu lassen und nicht Real- und Imaginärteil
zu betrachten. Trotzdem kann man bei Bedarf jederzeit auf den Real- und den Imaginärteil zugreifen.
Weil man nun in diesen Objekten denkt, kann ein Programm, das diese Objekte verwendet, konzeptionell
deutlich übersichtlicher und leichter verständlich werden, was bei der Fehlersuche helfen kann.
Außerdem werden die Attribute gekapselt, so dass man sich nicht ständig um diese kümmern muss.</p>
<p>Nach diesen Vorbemerkungen müssen wir uns nun ansehen, wie sich eine Klasse mit ihren Attributen
und Methoden definieren lässt. Dies wollen wir anhand eines Beispiels tun, in dem eine Klasse
für Vektoren in zwei Dimensionen definiert wird. Am Ende können wir mit solchen Vektoren als
eigenständigen Objekten arbeiten. Eigenschaften wie die Vektorkomponenten können dabei, wie gerade
schon für die komplexen Zahlen besprochen, häufig im Hintergrund bleiben, wie wir gleich noch
sehen werden.</p>
<p>Wir werden die Klassendefinition für zweidimensionale Vektoren schrittweise aufbauen und dabei
verschiedene Aspekte besprechen. Unsere erste Version ist durch den folgenden Code gegeben.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span>

<span class="k">class</span> <span class="nc">Vector2d</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">Vector2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Hier werden zunächst zwei trigonometrische Funktionen importiert, die wir benötigen werden,
um Vektoren in der Ebene zu drehen. Die eigentliche Klassendefinition beginnt dann in der
dritten Zeile mit dem Schlüsselwort. Der Name der Klasse, hier <code class="docutils literal notranslate"><span class="pre">Vector2d</span></code>, beginnt üblicherweise
mit einem Großbuchstaben und die Zeile wird ähnlich wie in einer Funktionsdefinition mit einem
Doppelpunkt abgeschlossen.</p>
<p>Es folgen drei Methoden, wobei die ersten beiden Namen tragen, die mit einem doppelten Unterstrich
beginnen und enden. Dadurch wird angedeutet, dass diese Methoden für Python eine besondere Bedeutung
haben. Die <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>-Methode wird ausgeführt, wenn eine Instanz der Klasse erzeugt wird.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vector2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">v1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;__main__.Vector2d at 0x7f8b84acd650&gt;
</pre></div>
</div>
</div>
</div>
<p>Wie wir sehen, hat die <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>-Methode drei Argumente. Bei der Instantiierung ist aber ein
Argument weniger anzugeben, da das erste Argument der <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>-Methode, das üblicherweise
<code class="docutils literal notranslate"><span class="pre">self</span></code> genannt wird, eine besondere Funktion erfüllt. Es steht gewissermaßen für die spezifische
Instanz und erlaubt es, diese Instanz den verschiedenen Methoden zugänglich zu machen, wie wir
noch genauer sehen werden. In der <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>-Methode werden die übergebenen Parameter je
nach Bedarf verarbeitet und in Attributen gespeichert sowie weitere zu Beginn erforderlich
Operationen durchgeführt. In unserem speziellen Fall müssen wir nur dafür sorgen, dass die in
den Parametern <code class="docutils literal notranslate"><span class="pre">x</span></code> und <code class="docutils literal notranslate"><span class="pre">y</span></code> vorliegenden Vektorkomponenten anschließend über entsprechende Attribute
zugänglich sind. Dazu weisen wir sie <code class="docutils literal notranslate"><span class="pre">self.x</span></code> beziehungsweise <code class="docutils literal notranslate"><span class="pre">self.y</span></code> zu. Damit können
wir auch nach der erfolgten Instantiierung auf die Attribute zugreifen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">v1</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2 1
</pre></div>
</div>
</div>
</div>
<p>Die Verwandtschaft mit der Bestimmung des Real- und Imaginärteils komplexer Zahlen, die wir eingangs
betrachtet hatten, ist offensichtlich.</p>
<p>Eine nützliche Methode, die wir oben bereits definiert haben, ist die <code class="xref py py-func docutils literal notranslate"><span class="pre">__str__()</span></code>-Methode, die
von Python dann aufgerufen wird, wenn das Objekt in eine Zeichenkette umgewandelt werden muss, wie dies
beispielsweise durch die <code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code>-Funktion geschieht. Wir lassen die Vektorkomponenten ausgeben,
um später leicht die Auswirkungen von weiteren Methoden unserer Klasse <code class="xref py py-class docutils literal notranslate"><span class="pre">Vector2d</span></code> zu überprüfen. Da die
<code class="xref py py-func docutils literal notranslate"><span class="pre">__str__()</span></code>-Methode das Argument <code class="docutils literal notranslate"><span class="pre">self</span></code> besitzt, haben wir in dieser Methode Zugriff auf die
Attribute des Objekts, also in unserem Fall auf die Vektorkomponenten.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 1)
</pre></div>
</div>
</div>
</div>
<p>Die dritte, oben definierte Methode <code class="xref py py-func docutils literal notranslate"><span class="pre">rotate()</span></code> soll es erlauben, den Vektor um einen Winkel <code class="docutils literal notranslate"><span class="pre">phi</span></code> in
der <span class="math notranslate nohighlight">\(x\)</span>–<span class="math notranslate nohighlight">\(y\)</span>-Ebene zu drehen.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>

<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-0.9999999999999999, 2.0)
</pre></div>
</div>
</div>
</div>
<p>Wie wir dem Code der <code class="xref py py-func docutils literal notranslate"><span class="pre">rotate()</span></code>-Methode entnehmen können, wird als Ergebnis eine neue Instanz der
<code class="xref py py-class docutils literal notranslate"><span class="pre">Vector2d</span></code> erzeugt. Alternativ hätten wir die Vektorkomponenten nach der Drehung <code class="docutils literal notranslate"><span class="pre">self.x</span></code> und <code class="docutils literal notranslate"><span class="pre">self.y</span></code>
zuweisen können. Dann hätten wir lediglich die Attribute des Vektors geändert ohne einen neuen Vektor
zu erzeugen.</p>
<p>Der Wert von Attributen kann auch explizit durch Zuweisung geändert werden.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="n">v1</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 1)
(4, 1)
</pre></div>
</div>
</div>
</div>
<p>Oft werden hierfür spezielle Methoden zur Verfügung gestellt, um überprüfen zu können, ob der neue Wert
gültig ist.</p>
<p>Für Vektoren wird man sicherlich auch eine Methode erwarten, die die Länge des Vektors bestimmt. Eine solche
Methode, die wir <code class="xref py py-func docutils literal notranslate"><span class="pre">norm()</span></code> nennen, lässt sich leicht mit Hilfe der <code class="xref py py-func docutils literal notranslate"><span class="pre">hypot()</span></code>-Funktion aus dem
<code class="docutils literal notranslate"><span class="pre">math</span></code>-Modul implementieren. Die erweiterte Klassendefinition geben wir nachfolgend vollständig wieder.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">hypot</span>

<span class="k">class</span> <span class="nc">Vector2d</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">norm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">hypot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">Vector2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Würden wir die mit <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> beginnende Zeile, einen sogenannten Dekorator, weglassen, so würde es sich bei
<code class="xref py py-func docutils literal notranslate"><span class="pre">norm()</span></code> einfach um eine Methode handeln, wie wir sie von der <code class="xref py py-func docutils literal notranslate"><span class="pre">rotate()</span></code>-Methode her kennen. Der
Dekorator <code class="docutils literal notranslate"><span class="pre">&#64;property</span></code> wandelt diese Methode jedoch in eine Eigenschaft um, auf deren Wert wir wie bei
einem Attribut zugreifen können.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vector2d</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">norm</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2.23606797749979
</pre></div>
</div>
</div>
</div>
<p>Es ist jedoch nicht möglich, den Wert dieses Attributs zu setzen.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="mi">10</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">line</span> <span class="mi">1</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">v1</span><span class="o">.</span><span class="n">norm</span> <span class="o">=</span> <span class="mi">10</span>

<span class="ne">AttributeError</span>: property &#39;norm&#39; of &#39;Vector2d&#39; object has no setter
</pre></div>
</div>
</div>
</div>
<p>Im Zusammenhang mit dem Setzen von Attributen ist noch wichtig zu wissen, dass man auch den Wert
von nicht in der Klassendefinition vorkommenden Attributen im Prinzip setzen kann. Das kann bei
Tippfehlern zu unerwartetem Verhalten führen. Dieser Umstand zeigt nochmals, dass es sinnvoll sein
kann, explizite Methoden zum Setzen und auch zum Auslesen von Attributen zu implementieren.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(2, 1)
-4
</pre></div>
</div>
</div>
</div>
<p>Um noch etwas deutlicher zu sehen, wie es das objektorientiertes Programmieren erlaubt, mit den Objekten
als eigene Einheit zu arbeiten, wollen wir unsere Beispielklasse ein letztes Mal erweitern.
Unser letztliches Ziel soll dabei sein, eine Methode zum Spiegeln eines Vektors an einer Achse,
die einen bestimmten Winkel mit der <span class="math notranslate nohighlight">\(x\)</span>-Achse einschließt, zu implementieren.</p>
<p>Dazu überlegen wir uns zunächst, wie wir diese allgemeine Spiegelung mathematisch bewerkstelligen
können. Dazu bezeichnen wir den ursprünglichen Vektor als <span class="math notranslate nohighlight">\(\vec v\)</span>, den gespiegelten Vektor als
<span class="math notranslate nohighlight">\({\vec v}'\)</span>, und die Spiegelachse werde durch den normierten Vektor <span class="math notranslate nohighlight">\(\vec n\)</span> spezifiziert. Dann können
wir <span class="math notranslate nohighlight">\(\vec v\)</span> in den Anteil in Richtung von <span class="math notranslate nohighlight">\(\vec n\)</span> sowie den dazu senkrechten Anteil zerlegen.
Es ist also</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align}
   \vec v_\parallel &amp;= \left(\vec v\cdot\vec n\right)\vec n\\
   \vec v_\perp &amp;= \vec v-\vec v_\parallel\,.
\end{align}\end{split}\]</div>
<p>Der gespiegelte Vektor ergibt sich dann zu</p>
<div class="math notranslate nohighlight">
\[{\vec v}' = \vec v_\parallel-\vec v_\perp = 2\left(\vec v\cdot\vec n\right)\vec n - \vec v\,.\]</div>
<p>Hieraus folgt, dass wir die Spiegelung alleine mit Hilfe der beteiligten Vektoren vornehmen
können, ohne die einzelnen Komponenten der Vektoren explizit ins Spiel bringen zu müssen. Dazu
müssen wir aber in der Lage sein Vektoren zu subtrahieren, mit reellen Zahlen zu multiplizieren
und ein Skalarprodukt auszuwerten.</p>
<p>Wir geben zunächst die vollständige, um einige Methoden ergänzte Klassendefinition von <code class="xref py py-class docutils literal notranslate"><span class="pre">Vector2d</span></code>
an und besprechen anschließend die neu hinzugefügten Methoden.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">hypot</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">pi</span>

<span class="k">class</span> <span class="nc">Vector2d</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="fm">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vector2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Vector2d</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="n">other</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">Vector2d</span><span class="p">):</span>
             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">y</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
             <span class="k">return</span> <span class="n">Vector2d</span><span class="p">(</span><span class="n">other</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">other</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Vector2d kann nicht mit </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">other</span><span class="p">)</span><span class="si">}</span><span class="s1"> multipliziert werden.&#39;</span><span class="p">)</span>

    <span class="fm">__rmul__</span> <span class="o">=</span> <span class="fm">__mul__</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">norm</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">hypot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="k">return</span> <span class="n">Vector2d</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mirror</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">Vector2d</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">),</span> <span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">))</span>
        <span class="n">parallel</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">*</span><span class="n">n</span><span class="p">)</span><span class="o">*</span><span class="n">n</span>
        <span class="k">return</span> <span class="mi">2</span><span class="o">*</span><span class="n">parallel</span> <span class="o">-</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">orthogonal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">pi</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Zunächst sehen wir uns die Methoden <code class="xref py py-func docutils literal notranslate"><span class="pre">__add__()</span></code> und <code class="xref py py-func docutils literal notranslate"><span class="pre">__sub__()</span></code> an, die
von Python unter anderem dann aufgerufen werden, wenn zwei Objekte mit einem Plus-
beziehungsweise Minuszeichen verknüpft werden. Der erste Vektor entspricht dem Argument
<code class="docutils literal notranslate"><span class="pre">self</span></code> und das zweite Argument <code class="docutils literal notranslate"><span class="pre">other</span></code> entspricht dem zweiten Vektor. Die entsprechenden
Operationen haben wir entsprechend komponentenweise implementiert.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v1</span> <span class="o">=</span> <span class="n">Vector2d</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">v2</span> <span class="o">=</span> <span class="n">Vector2d</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">v1</span><span class="o">+</span><span class="n">v2</span><span class="si">}</span><span class="s1">   </span><span class="si">{</span><span class="n">v1</span><span class="o">-</span><span class="n">v2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(-1, 5)   (3, -1)
</pre></div>
</div>
</div>
</div>
<p>Für eine bessere Implementation sollte man natürlich noch überprüfen, ob <code class="docutils literal notranslate"><span class="pre">other</span></code> wirklich eine
Instanz von <code class="xref py py-class docutils literal notranslate"><span class="pre">Vector2d</span></code> ist. Dies werden wir in der nächsten Methode besser machen.</p>
<p>Die <code class="xref py py-func docutils literal notranslate"><span class="pre">__mul__()</span></code>-Methode wird von Python unter anderem dann aufgerufen, wenn zwei Objekte
mit dem Multiplikationsstern verknüpft werden. Für die Spiegelung eines Vektors müssen wir
dabei zwei Fälle unterscheiden, Während sichergestellt ist, dass <code class="docutils literal notranslate"><span class="pre">self</span></code> immer eine Instanz von
<code class="xref py py-class docutils literal notranslate"><span class="pre">Vector2d</span></code> ist, soll das Verhalten der <code class="xref py py-func docutils literal notranslate"><span class="pre">__mul__()</span></code>-Methode davon abhängen, ob <code class="docutils literal notranslate"><span class="pre">other</span></code>
ebenfalls eine Instanz dieser Klasse ist oder aber eine Gleitkommazahl (<code class="docutils literal notranslate"><span class="pre">float</span></code>) oder ein
Integer (<code class="docutils literal notranslate"><span class="pre">int</span></code>). Im ersten Fall haben wir ein Skalarprodukt implementiert und im zweiten Fall
multiplizieren wir die beiden Komponenten mit der betreffenden Zahl. Trifft keiner der beiden
Fälle zu, geben wir eine entsprechende Fehlermeldung aus.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s1">*</span><span class="si">{</span><span class="n">v2</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="n">v1</span><span class="o">*</span><span class="n">v2</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s1">*5 = </span><span class="si">{</span><span class="n">v1</span><span class="o">*</span><span class="mi">5</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2)*(-2, 3) = 4
(1, 2)*5 = (5, 10)
</pre></div>
</div>
</div>
</div>
<p>Leider funktioniert die umgekehrte Reihenfolge noch nicht, was sich aber dadurch beheben lässt,
dass man eine Methode <code class="xref py py-func docutils literal notranslate"><span class="pre">__rmul__()</span></code> definiert, die von Python aufgerufen wird, wenn <code class="xref py py-func docutils literal notranslate"><span class="pre">__mul__()</span></code>
fehlschlägt, und das die beiden Argumente <code class="docutils literal notranslate"><span class="pre">self</span></code> und <code class="docutils literal notranslate"><span class="pre">other</span></code> vertauscht.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;5*</span><span class="si">{</span><span class="n">v1</span><span class="si">}</span><span class="s1"> = </span><span class="si">{</span><span class="mi">5</span><span class="o">*</span><span class="n">v1</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>5*(1, 2) = (5, 10)
</pre></div>
</div>
</div>
</div>
<p>Nun ist es ein Leichtes, die Spiegelung entsprechend der zuvor hergeleiteten Formeln zu implementieren.
Wir überprüfen, ob die Spiegelungen an der <span class="math notranslate nohighlight">\(x\)</span>- und der <span class="math notranslate nohighlight">\(y\)</span>-Achse sowie an der ersten Winkelhalbierenden
die erwarteten Ergebnisse liefern.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">phi</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">v1</span><span class="o">.</span><span class="n">mirror</span><span class="p">(</span><span class="n">phi</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(1, 2)
(1.0, -2.0)
(-0.9999999999999998, 2.0)
(2.0, 0.9999999999999996)
</pre></div>
</div>
</div>
</div>
<p>Ganz am Ende der Klassendefinition haben wir noch eine Methode hinzugefügt, die
mit der Spiegelung nichts zu tun hat, sondern demonstriert, wie man Methoden
innerhalb der Klassendefinition aufruft.  Die Methode <code class="xref py py-func docutils literal notranslate"><span class="pre">orthogonal()</span></code>
bestimmt einen zum gegebenen Vektor senkrechten Vektor. Auch wenn es nicht die
optimale Lösung darstellt, rotieren wir den Vektor dazu mit Hilfe der Methode
<code class="xref py py-func docutils literal notranslate"><span class="pre">rotate()</span></code> um <span class="math notranslate nohighlight">\(\pi/2\)</span>. Wir sehen hier, dass man beim Aufruf <code class="docutils literal notranslate"><span class="pre">self.</span></code> voranstellen
muss. Unterlässt man das, sucht Python nach einer Funktion mit entsprechendem Namen
außerhalb der Klassendefinition. Nachdem <code class="docutils literal notranslate"><span class="pre">self</span></code> bereits dem Methodennamen vorangestellt
wurde, muss es in der Liste der Argumente entfallen. Diese scheinbar unterschiedliche
Anzahl von Argumenten kann gerade am Anfang zu Verwirrung führen.</p>
</section>
<section id="vererbung">
<h2><span class="section-number">9.2. </span>Vererbung<a class="headerlink" href="#vererbung" title="Link zu dieser Überschrift">#</a></h2>
<p>Es kommt immer wieder vor, dass man man mehrere Klassen implementieren möchte, die
in einem hierarchischen Verhältnis zueinander stehen. Eine oberste Klasse hat dann
typischerweise nur wenige Attribute und Methoden definiert, die aber an eine
darunter stehende Klasse vererbt werden können. Diese zweite Klasse kann dann noch
eigene Attribute oder Methoden definieren oder auch Methoden der ersten Klasse
überschreiben.</p>
<p>Als Beispiel betrachten wir einen Massenpunkt und eine ausgedehnte Masse, wobei wir
uns der Einfachheit halber auf den zweidimensionalen Fall beschränken wollen. Die
Lage des Massenpunktes ist dann durch zwei Koordinaten definiert und man kann eine
Methode definieren, die dazu dient den Massenpunkt zu verschieben. In der Realität
würde man vielleicht auch die Masse und die Geschwindigkeit des Massenpunkts
berücksichtigen, aber darauf wollen wir der Einfachheit halber hier verzichten.</p>
<p>Einer ausgedehnten Masse kann man im Gegensatz zum Massenpunkt noch eine Orientierung
zuordnen und genauso wie man den Massenpunkt oder die Masse verschieben kann, kann
man die Masse auch um einen Winkel drehen.</p>
<p>In diesem Fall ist es also sinnvoll, zunächst eine Klasse für den Massenpunkt zu
definieren, die dann ihre Attribute und Methoden an die Klasse vererbt, die die
ausgedehnte Masse beschreibt.</p>
<p>Wir beginnen also mit einem Massenpunkt und definieren die Klasse <code class="xref py py-class docutils literal notranslate"><span class="pre">Massenpunkt</span></code>.
Wenn nichts anderes angegeben ist, liege der Massenpunkt anfänglich im Ursprung.
Zudem erlaubt es die <code class="xref py py-func docutils literal notranslate"><span class="pre">shift()</span></code>-Methode, den Massenpunkt zu verschieben. Die
<code class="xref py py-func docutils literal notranslate"><span class="pre">__str__()</span></code>-Methode sorgt dafür, dass wir leicht die Position des Massenpunktes
ausgeben lassen können.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Massenpunkt</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Massenpunkt am Ort (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">)&#39;</span>

    <span class="k">def</span> <span class="nf">shift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div>
</div>
<p>Der folgende Code zeigt, wie man mit der gerade definierten Klasse arbeiten kann.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m1</span> <span class="o">=</span> <span class="n">Massenpunkt</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Massenpunkt am Ort (0, 0)
Massenpunkt am Ort (1, 2)
Massenpunkt am Ort (-1.5, 5)
</pre></div>
</div>
</div>
</div>
<p>Nun gehen wir zu einer ausgedehnten Masse über und definieren die Klasse
<code class="xref py py-class docutils literal notranslate"><span class="pre">AusgedehnteMasse</span></code>, die von der Klasse <code class="xref py py-class docutils literal notranslate"><span class="pre">Massenpunkt</span></code> abgeleitet
wird, also Attribute und Methoden erbt.  Entsprechend wird die Klasse
<code class="xref py py-class docutils literal notranslate"><span class="pre">Massenpunkt</span></code>, die sogenannte Elternklasse, in Klammern angegeben. Es
ist zwar auch möglich, von mehreren Klassen zu erben, worauf wir an dieser
Stelle jedoch nicht eingehen können. In einem solchen Fall muss man sich dann
um Fragen kümmern wie von welcher Klasse eine bestimmte Methode geerbt wird.
Dies wird zum Beispiel dann relevant, wenn mehrere der Elternklassen eine
Methode mit gleichem Namen implementieren.</p>
<p>Die <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>-Methode der Klasse <code class="xref py py-class docutils literal notranslate"><span class="pre">AusgedehnteMasse</span></code> besitzt
nun drei statt nur zwei Argumente. Hinzugekommen ist ein Winkel in Grad,
der die Ausrichtung der Masse charakterisiert, und wiederum einen Defaultwert
besitzt. Der Wert des Winkels wird in einem Attribut gespeichert und dann
eine Methode <code class="xref py py-func docutils literal notranslate"><span class="pre">normalise()</span></code> aufgerufen, die sicherstellt, dass der Winkel
zwischen 0° und 360° liegt. Da der Winkel kein Integer sein muss, genügt
hier nicht eine einfache Modulooperation. Bei dieser Gelegenheit betonen
wir noch einmal, dass beim Aufruf einer in der Klasse definierten Methode
ein <code class="docutils literal notranslate"><span class="pre">self.</span></code> vor den Methodennamen gestellt werden muss und dafür das
Argument <code class="docutils literal notranslate"><span class="pre">self</span></code> in der Argumentliste entfällt. Die Verarbeitung der beiden
Argumente <code class="docutils literal notranslate"><span class="pre">x</span></code> und <code class="docutils literal notranslate"><span class="pre">y</span></code> überlassen wir der <code class="xref py py-func docutils literal notranslate"><span class="pre">__init__()</span></code>-Methode der
Elternklasse, die wir mit Hilfe der <code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code>-Methode erhalten.</p>
<p>Die <code class="xref py py-func docutils literal notranslate"><span class="pre">__str__()</span></code>-Methode, die nützliche Information über eine Instanz
ausgeben soll, wird nicht aus der Elternklasse übernommen, sondern
überschrieben, da zusätzlich die Ausrichtung der Masse ausgeben wollen.
Ein Methode, die diese Klasse neu definiert, ist <code class="xref py py-func docutils literal notranslate"><span class="pre">rotate()</span></code>, die die
Masse um einen gewissen Winkel um die durch den aktuellen Ort verlaufende
Achse senkrecht zur <span class="math notranslate nohighlight">\(x-y\)</span>-Ebene dreht.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AusgedehnteMasse</span><span class="p">(</span><span class="n">Massenpunkt</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">phi_deg</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span> <span class="o">=</span> <span class="n">phi_deg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">normalise</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">normalise</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span> <span class="o">//</span> <span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="mi">360</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;Masse am Ort (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="si">}</span><span class="s1">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="si">}</span><span class="s1">) mit Ausrichtung </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span><span class="si">}</span><span class="s1">°&#39;</span>

    <span class="k">def</span> <span class="nf">rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phi_deg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">phi_deg</span> <span class="o">+</span> <span class="n">phi_deg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">normalise</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<p>Die folgende Sequenz aus Verschiebungen und Drehungen zeigt, dass obwohl
die Klasse <code class="docutils literal notranslate"><span class="pre">AusgedehnteMasse</span></code> nicht selbst eine <code class="xref py py-func docutils literal notranslate"><span class="pre">shift()</span></code> implementiert,
diese aus der Elternklasse <code class="docutils literal notranslate"><span class="pre">Massenpunkt</span></code> geerbt wurde.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m2</span> <span class="o">=</span> <span class="n">AusgedehnteMasse</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mi">270</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="mf">100.5</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">m2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Masse am Ort (0, 0) mit Ausrichtung 0°
Masse am Ort (1, 2) mit Ausrichtung 0°
Masse am Ort (1, 2) mit Ausrichtung 270°
Masse am Ort (-2, 4.5) mit Ausrichtung 10.5°
</pre></div>
</div>
</div>
</div>
<p>Außerdem zeigt die letzte Ausgabe, dass die Reduktion des Winkels auf das
Intervall von 0° bis 360° in der <code class="xref py py-func docutils literal notranslate"><span class="pre">rotate()</span></code>-Methode funktioniert. Wir
erwähnen nochmals, dass es wichtig ist, Methoden innerhalb der Klassendefinition
mit einem vorangestellten <code class="docutils literal notranslate"><span class="pre">self.</span></code> aufzurufen und dafür beim Aufruf das Argument
<code class="docutils literal notranslate"><span class="pre">self</span></code> wegzulassen.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="scipy.html" title="zurück Seite">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">zurück</p>
            <p class="prev-next-title"><span class="section-number">8. </span>Numerische Programmbibliotheken am Beispiel von NumPy/SciPy</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="zahlensysteme.html" title="weiter Seite">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">weiter</p>
        <p class="prev-next-title"><span class="section-number">10. </span>Anhang: Zahlensysteme</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Gert-Ludwig Ingold<br/>
  
      &copy; Copyright CC-BY.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>